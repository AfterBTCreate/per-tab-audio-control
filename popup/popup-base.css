/* ==================== Base Styles ==================== */
/* Body, container, header, theme toggle */

/* Comfortaa font for ABTC logo */
@font-face {
  font-family: 'Comfortaa';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url('../fonts/comfortaa-latin-600.woff2') format('woff2');
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background: linear-gradient(135deg, #1a2744 0%, #0c1929 100%);
  background-attachment: fixed;
  color: #f0f0f0;
  width: 320px;
  min-height: 200px;
  border: 1px solid #5a7a9a;
  box-shadow: 0 0 20px rgba(90, 122, 154, 0.2), 0 0 40px rgba(212, 199, 138, 0.1);
}

/* Hide controls during initialization to prevent flash when loading disabled domains */
body.initializing {
  min-height: auto;
}

body.initializing .volume-adjust-btn,
body.initializing .volume-value,
body.initializing .slider-container,
body.initializing .presets,
body.initializing .balance-row,
body.initializing .enhancements-section,
body.initializing .status-message {
  display: none;
}

.container {
  padding: 6px;
  display: flex;
  flex-direction: column;
}

/* Header */
.header {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-bottom: 4px;
}

/* Brand Logo Link */
.brand-logo-link {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  text-decoration: none;
  cursor: pointer;
  border-radius: 6px;
  transition: opacity 0.15s ease;
}

.brand-logo-link:hover {
  opacity: 0.8;
}

.brand-logo-link:active {
  opacity: 0.6;
}

/* Brand Logo (ABTC) */
.brand-logo {
  display: flex;
  align-items: center;
  justify-content: center;
}

.brand-logo svg {
  display: block;
}

/* Show dark logo by default, hide light logo */
.brand-logo .logo-dark {
  display: block;
}

.brand-logo .logo-light {
  display: none;
}

/* Brand Text */
.brand-text {
  display: flex;
  flex-direction: column;
  align-items: center;
  line-height: 1.1;
  font-size: 10px;
  font-weight: 500;
  color: #5a7a9a;
  letter-spacing: 0.3px;
  white-space: nowrap;
  user-select: none;
}

/* Header Buttons */
.header-btn {
  background: transparent;
  border: 1px solid #5a7a9a;
  border-radius: 5px;
  padding: 4px;
  cursor: pointer;
  color: #7a8fa5;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.header-btn:hover {
  background: #0f1621;
  color: #f0f0f0;
  border-color: #7a9ab8;
}

/* All utility buttons - muted gray (focus, basic/advanced, theme, settings) */
#focusBtn,
#modeToggle,
#themeToggle,
#settingsBtn {
  background: #5a5a5a;
  border-color: #5a5a5a;
  color: #ffffff;
}

#focusBtn:hover,
#modeToggle:hover,
#themeToggle:hover,
#settingsBtn:hover {
  background: #4a4a4a;
  border-color: #4a4a4a;
}

#themeToggle .icon-sun {
  display: none;
}

#themeToggle .icon-moon {
  display: block;
}

.logo {
  color: #ffffff;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  padding: 0;
}

.header-spacer {
  flex: 1;
}

/* Hidden header items (used by header layout customization) */
.header-item-hidden {
  display: none !important;
}

/* Utility class for hiding elements (CSP-compliant alternative to inline styles) */
.hidden {
  display: none !important;
}

.global-label {
  font-size: 10px;
  font-weight: 500;
  color: #555555;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-right: 2px;
}

.logo svg {
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.4));
}

/* ==================== Light Mode: Base (Morning Theme) ==================== */

body.light-mode {
  background: linear-gradient(135deg, #f5e6d3 0%, #e8d9c6 100%);
  background-attachment: fixed;
  color: #2d2520;
  border: 1px solid #d4c4b0;
  box-shadow: 0 0 20px rgba(139, 115, 85, 0.15), 0 0 40px rgba(196, 168, 112, 0.1);
}

body.light-mode .logo {
  color: #2d2520;
}

body.light-mode .logo svg {
  filter: drop-shadow(0 0 10px rgba(139, 115, 85, 0.3));
}

/* Swap brand logo in light mode */
body.light-mode .brand-logo .logo-dark {
  display: none;
}

body.light-mode .brand-logo .logo-light {
  display: block;
}

body.light-mode .brand-text {
  color: #8b7a6a;
}

body.light-mode .global-label {
  color: #6b5d52;
}

body.light-mode .header-btn {
  border-color: #d4c4b0;
  color: #6b5d52;
}

body.light-mode .header-btn:hover {
  background: #faf5ef;
  color: #2d2520;
  border-color: #c4b4a0;
}

/* Light mode: All utility buttons - muted brown/gray */
body.light-mode #focusBtn,
body.light-mode #modeToggle,
body.light-mode #themeToggle,
body.light-mode #settingsBtn {
  background: #8b7355;
  border-color: #8b7355;
  color: #ffffff;
}

body.light-mode #focusBtn:hover,
body.light-mode #modeToggle:hover,
body.light-mode #themeToggle:hover,
body.light-mode #settingsBtn:hover {
  background: #7a6245;
  border-color: #7a6245;
}

/* Light mode: Audio mode toggle */
body.light-mode .audio-mode-toggle.mode-tabcapture {
  background: #4a6a9a;
  border-color: #4a6a9a;
  color: #ffffff;
}

body.light-mode .audio-mode-toggle.mode-webaudio {
  background: #b86e2d;
  border-color: #b86e2d;
  color: #ffffff;
}

body.light-mode .audio-mode-toggle.mode-off {
  background: #8b4040;
  border-color: #8b4040;
  color: #ffffff;
}

body.light-mode #focusBtn.active {
  background: #4a7a5c;
  border-color: #4a7a5c;
  color: #ffffff;
}

body.light-mode #themeToggle .icon-sun {
  display: block;
}

body.light-mode #themeToggle .icon-moon {
  display: none;
}

/* ==================== Basic/Advanced Mode Toggle ==================== */

/* Default: Advanced mode - show three lines icon */
.mode-toggle .icon-basic {
  display: none;
}

.mode-toggle .icon-advanced {
  display: block;
}

/* In basic mode, show single line icon */
body.basic-mode .mode-toggle .icon-basic {
  display: block;
}

body.basic-mode .mode-toggle .icon-advanced {
  display: none;
}

/* Hide advanced elements in basic mode */
body.basic-mode .full-mode-only {
  display: none !important;
}

body.basic-mode {
  min-height: auto;
}

/* ==================== Audio Mode Toggle (Tab Capture / Web Audio / Disable) ==================== */

/* Hide all mode icons by default, show active one via JS class */
.audio-mode-toggle .mode-icon {
  display: none;
}

/* Tab Capture mode (blue) */
.audio-mode-toggle.mode-tabcapture {
  background: #4a6a9a;
  border-color: #4a6a9a;
  color: #ffffff;
}

.audio-mode-toggle.mode-tabcapture:hover {
  background: #3d5a85;
  border-color: #3d5a85;
}

.audio-mode-toggle.mode-tabcapture .mode-tabcapture {
  display: block;
}

/* Web Audio mode (orange) */
.audio-mode-toggle.mode-webaudio {
  background: #b86e2d;
  border-color: #b86e2d;
  color: #ffffff;
}

.audio-mode-toggle.mode-webaudio:hover {
  background: #a05f25;
  border-color: #a05f25;
}

.audio-mode-toggle.mode-webaudio .mode-webaudio {
  display: block;
}

/* Disable mode (red) */
.audio-mode-toggle.mode-off {
  background: #8b4040;
  border-color: #8b4040;
  color: #ffffff;
}

.audio-mode-toggle.mode-off:hover {
  background: #7a3636;
  border-color: #7a3636;
}

.audio-mode-toggle.mode-off .mode-off {
  display: block;
}

/* Focus button - active state (green) */
#focusBtn.active {
  background: #4a7a5c;
  border-color: #4a7a5c;
  color: #ffffff;
}

#focusBtn.active:hover {
  background: #3d6a4d;
  border-color: #3d6a4d;
}

/* ==================== Audio Blocked State ==================== */
/* When extension cannot access audio on a site, grey out controls */

/* Grey out and disable volume controls */
body.audio-blocked .volume-adjust-btn,
body.audio-blocked .volume-value,
body.audio-blocked #resetTabBtn,
body.audio-blocked .slider-container,
body.audio-blocked .presets,
body.audio-blocked .balance-row,
body.audio-blocked .enhancements-section {
  opacity: 0.35;
  pointer-events: none;
  filter: grayscale(0.5);
}

/* Keep tab navigation arrows, visualizer, play button, and header fully enabled */
body.audio-blocked .tab-info-wrapper,
body.audio-blocked .header,
body.audio-blocked #prevTabBtn,
body.audio-blocked #nextTabBtn,
body.audio-blocked #mediaToggleBtn {
  opacity: 1;
  pointer-events: auto;
  filter: none;
}

/* Keep the status message and fallback buttons visible and enabled */
body.audio-blocked #statusMessage,
body.audio-blocked #enableTabCaptureBtn,
body.audio-blocked #enableNativeModeBtn {
  opacity: 1;
  pointer-events: auto;
  filter: none;
}

/* ==================== Valentine Easter Egg Overlay ==================== */

.valentine-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(15, 10, 25, 0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  animation: valentineFadeIn 1s ease;
}

.valentine-overlay.hidden {
  display: none !important;
}

@keyframes valentineFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.valentine-content {
  text-align: center;
  padding: 24px 16px;
  animation: valentineSlideUp 0.8s ease 0.3s both;
}

@keyframes valentineSlideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.valentine-hearts {
  font-size: 16px;
  color: #e74c6f;
  letter-spacing: 8px;
  margin: 8px 0;
  animation: valentinePulse 2s ease-in-out infinite;
}

@keyframes valentinePulse {
  0%, 100% { opacity: 0.7; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.1); }
}

.valentine-message {
  font-size: 14px;
  line-height: 1.8;
  color: #f0e6f0;
  font-style: italic;
  max-width: 280px;
  margin: 12px auto;
}

.valentine-signature {
  font-size: 12px;
  color: #e74c6f;
  letter-spacing: 2px;
  margin-top: 4px;
}

.valentine-dismiss {
  background: transparent;
  border: 1px solid #e74c6f;
  color: #e74c6f;
  font-size: 16px;
  padding: 6px 20px;
  border-radius: 20px;
  cursor: pointer;
  margin-top: 8px;
  transition: all 0.2s ease;
}

.valentine-dismiss:hover {
  background: #e74c6f;
  color: #ffffff;
}

/* Light mode valentine overlay */
body.light-mode .valentine-overlay {
  background: rgba(245, 230, 220, 0.97);
}

body.light-mode .valentine-message {
  color: #4a2030;
}

body.light-mode .valentine-hearts {
  color: #c93060;
}

body.light-mode .valentine-signature {
  color: #c93060;
}

body.light-mode .valentine-dismiss {
  border-color: #c93060;
  color: #c93060;
}

body.light-mode .valentine-dismiss:hover {
  background: #c93060;
  color: #ffffff;
}
