<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Per-Tab Audio Control - User Guide</title>
  <link rel="stylesheet" href="options-base.css">
  <link rel="stylesheet" href="options-sections.css">
  <link rel="stylesheet" href="options-visualizer.css">
  <link rel="stylesheet" href="options-info.css">
  <link rel="stylesheet" href="options-forms.css">
  <link rel="stylesheet" href="options-rules.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo" aria-hidden="true" title="Per-Tab Audio Control">
        <!-- Dark mode logo - A top-left, B top-right, C bottom-left, speaker bottom-right -->
        <svg class="logo-dark" width="56" height="56" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect x="10" y="10" width="80" height="80" rx="8" stroke="#5a7a9a" stroke-width="5" fill="#0f172a"/>
          <line x1="50" y1="10" x2="50" y2="90" stroke="#5a7a9a" stroke-width="3"/>
          <line x1="10" y1="50" x2="90" y2="50" stroke="#5a7a9a" stroke-width="3"/>
          <rect x="53" y="53" width="34" height="34" rx="3" fill="#d4c78a"/>
          <text x="30" y="38" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#c9a0a0" text-anchor="middle">A</text>
          <text x="70" y="38" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#a0c9a8" text-anchor="middle">B</text>
          <text x="30" y="78" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#a0b8c9" text-anchor="middle">C</text>
          <path d="M61 66 L61 74 L65 74 L71 78 L71 62 L65 66 Z" fill="#0f172a"/>
          <path d="M74 66 Q78 70 74 74" stroke="#0f172a" stroke-width="2.5" stroke-linecap="round" fill="none"/>
          <path d="M77 63 Q83 70 77 77" stroke="#0f172a" stroke-width="2.5" stroke-linecap="round" fill="none"/>
        </svg>
        <!-- Light mode logo - A top-left, B top-right, C bottom-left, speaker bottom-right -->
        <svg class="logo-light" width="56" height="56" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect x="10" y="10" width="80" height="80" rx="8" stroke="#8a7a6a" stroke-width="5" fill="#faf5ef"/>
          <line x1="50" y1="10" x2="50" y2="90" stroke="#8a7a6a" stroke-width="3"/>
          <line x1="10" y1="50" x2="90" y2="50" stroke="#8a7a6a" stroke-width="3"/>
          <rect x="53" y="53" width="34" height="34" rx="3" fill="#c4a870"/>
          <text x="30" y="38" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#a07070" text-anchor="middle">A</text>
          <text x="70" y="38" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#70a078" text-anchor="middle">B</text>
          <text x="30" y="78" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#7088a0" text-anchor="middle">C</text>
          <path d="M61 66 L61 74 L65 74 L71 78 L71 62 L65 66 Z" fill="#faf5ef"/>
          <path d="M74 66 Q78 70 74 74" stroke="#faf5ef" stroke-width="2.5" stroke-linecap="round" fill="none"/>
          <path d="M77 63 Q83 70 77 77" stroke="#faf5ef" stroke-width="2.5" stroke-linecap="round" fill="none"/>
        </svg>
      </div>
      <h1>User Guide</h1>
      <p class="header-tagline">The audio controls browsers forgot to include</p>
      <a href="options.html" class="header-btn" title="Back to Settings" aria-label="Back to Settings">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
      <button class="header-btn" id="expandAllToggle" title="Expand all sections" aria-label="Expand all sections" aria-expanded="false">
        <svg class="icon-expand" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <polyline points="6 9 12 15 18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <polyline points="6 4 12 10 18 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <svg class="icon-collapse" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <polyline points="18 15 12 9 6 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <polyline points="18 20 12 14 6 20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button class="header-btn" id="themeToggle" title="Toggle morning/bedtime" aria-label="Toggle morning/bedtime">
        <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
          <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </header>

    <!-- About Branding -->
    <div class="about-header">
      <div class="about-logo">
        <!-- Dark mode logo - A top-left, B top-right, C bottom-left, moon bottom-right -->
        <svg class="logo-dark" width="48" height="48" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="After Bedtime Creations logo">
          <rect x="10" y="10" width="80" height="80" rx="8" stroke="#5a7a9a" stroke-width="5" fill="#0f172a"/>
          <line x1="50" y1="10" x2="50" y2="90" stroke="#5a7a9a" stroke-width="3"/>
          <line x1="10" y1="50" x2="90" y2="50" stroke="#5a7a9a" stroke-width="3"/>
          <rect x="53" y="53" width="34" height="34" rx="3" fill="#d4c78a"/>
          <text x="30" y="38" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#c9a0a0" text-anchor="middle">A</text>
          <text x="70" y="38" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#a0c9a8" text-anchor="middle">B</text>
          <text x="30" y="78" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#a0b8c9" text-anchor="middle">C</text>
          <path d="M80 70 A11 11 0 1 1 70 58 A8 8 0 0 0 80 70" fill="#0f172a"/>
        </svg>
        <!-- Light mode logo - A top-left, B top-right, C bottom-left, moon bottom-right -->
        <svg class="logo-light" width="48" height="48" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="After Bedtime Creations logo">
          <rect x="10" y="10" width="80" height="80" rx="8" stroke="#8a7a6a" stroke-width="5" fill="#faf5ef"/>
          <line x1="50" y1="10" x2="50" y2="90" stroke="#8a7a6a" stroke-width="3"/>
          <line x1="10" y1="50" x2="90" y2="50" stroke="#8a7a6a" stroke-width="3"/>
          <rect x="53" y="53" width="34" height="34" rx="3" fill="#c4a870"/>
          <text x="30" y="38" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#a07070" text-anchor="middle">A</text>
          <text x="70" y="38" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#70a078" text-anchor="middle">B</text>
          <text x="30" y="78" font-family="Comfortaa, sans-serif" font-size="20" font-weight="600" fill="#7088a0" text-anchor="middle">C</text>
          <path d="M80 70 A11 11 0 1 1 70 58 A8 8 0 0 0 80 70" fill="#faf5ef"/>
        </svg>
      </div>
      <div class="about-content">
        <div class="about-brand"><span class="brand-a">A</span>fter <span class="brand-b">B</span>edtime <span class="brand-c">C</span>reations</div>
        <div class="about-tagline">Privacy-focused software, built late.</div>
      </div>
      <div class="about-links">
        <a href="https://afterbedtimecreations.com" target="_blank" rel="noopener noreferrer" class="about-link icon-only" title="Website" aria-label="Visit website">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="2" y1="12" x2="22" y2="12"></line>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
          </svg>
        </a>
        <a href="https://github.com/AfterBTCreate" target="_blank" rel="noopener noreferrer" class="about-link icon-only" title="GitHub" aria-label="Visit GitHub">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
        </a>
        <a href="https://x.com/AfterBTCreate" target="_blank" rel="noopener noreferrer" class="about-link icon-only" title="X (Twitter)" aria-label="Visit X (Twitter)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
        </a>
      </div>
    </div>

    <!-- Popup Controls -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Popup Controls</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">The popup provides quick access to all audio controls for the current tab.</p>

        <div class="info-box">
          <h4>Header Buttons (Left to Right, Default Order)</h4>
          <ul class="feature-list">
            <li><strong>ABTC Logo</strong> — After Bedtime Creations logo (locked at start, cannot be moved)</li>
            <li><strong>Brand Text</strong> — "After Bedtime Creations" text (locked at start, cannot be moved)</li>
            <li><strong>Audio Mode</strong> — Cycles through Tab Capture (blue), Web Audio (orange), and Disable (red) modes. Click to switch. Firefox skips Tab Capture.</li>
            <li><strong>Focus</strong> — Mutes all other browser tabs (optional, can be hidden)</li>
            <li><strong>Basic/Advanced Toggle</strong> — Switches between Basic (volume only) and Advanced (all features) modes</li>
            <li><strong>Theme</strong> — Switches between morning/bedtime themes (optional, can be hidden)</li>
            <li><strong>Settings</strong> — Opens the settings page</li>
            <li><strong>Volume Icon</strong> — Shows current volume state (muted, low, medium, high, boosted); animated waves indicate volume level (optional, can be hidden)</li>
          </ul>
          <p style="margin-top: 8px;"><em>Note: The order of header icons can be customized in Settings → Header Layout. Focus, Theme, and Volume Icon can be hidden. The ABTC Logo and Brand Text are locked at the start. Spacers are placed between groups by default. Keyboard shortcuts are shown in the popup footer.</em></p>
        </div>

        <div class="info-box">
          <h4>Audio Mode Toggle</h4>
          <p>A single toggle button cycles through three audio processing modes:</p>
          <ul class="feature-list">
            <li><strong>Tab Capture</strong> (blue) — Captures audio at browser level (Chrome only). Most reliable, works on all sites. <em>Default on Chrome.</em></li>
            <li><strong>Web Audio</strong> (orange) — Hooks into page audio directly. May not work on sites with CORS restrictions. <em>Default on Firefox.</em></li>
            <li><strong>Disable</strong> (red) — Uses native browser audio. Maximum compatibility but limits volume to 0-100% with no effects.</li>
          </ul>
          <p style="margin-top: 8px;">Click the button to cycle to the next mode. Your preference is saved per-site. On Firefox, Tab Capture is skipped.</p>
        </div>

        <div class="info-box">
          <h4>Volume Row Controls</h4>
          <p>Below the visualizer, the volume row contains these controls (left to right):</p>
          <ul class="feature-list">
            <li><strong>▶ (Play/Pause)</strong> — Toggle media playback on the current tab</li>
            <li><strong>← (Left Arrow)</strong> — Switch to previous audio tab</li>
            <li><strong>− (Minus)</strong> — Decrease volume by your configured step (default 1%)</li>
            <li><strong>Percentage Display</strong> — Shows current volume (0-500%)</li>
            <li><strong>+ (Plus)</strong> — Increase volume by your configured step (default 1%)</li>
            <li><strong>→ (Right Arrow)</strong> — Switch to next audio tab</li>
            <li><strong>↺ (Reset)</strong> — Reset current tab to default settings</li>
          </ul>
          <p style="margin-top: 8px;"><em>Note: Tab navigation arrows only appear when multiple tabs have audio playing.</em></p>
        </div>

        <div class="info-box">
          <h4>Extension Icon Badge</h4>
          <p>The extension icon in your browser toolbar displays badges to show status at a glance:</p>
          <ul class="feature-list">
            <li><strong style="background: #000; color: #fff; padding: 1px 4px; border-radius: 2px;">0% - 500%</strong> — Current volume level. Muted (0%) shows a red badge. Badge appearance can be changed in Settings → Appearance → Badge Style.</li>
            <li><strong style="background: #4A90D9; color: #fff; padding: 1px 4px; border-radius: 2px;">!</strong> — <strong>Blue:</strong> Tab Capture needs activation (Chrome only). Click the extension or use a keyboard shortcut to enable.</li>
            <li><strong style="background: #D94A4A; color: #fff; padding: 1px 4px; border-radius: 2px;">!</strong> — <strong>Red:</strong> A site rule exists for this page but hasn't been applied yet. Click the extension to apply it.</li>
            <li><strong style="background: #fbbf24; color: #000; padding: 1px 4px; border-radius: 2px;">!</strong> — <strong>Yellow:</strong> Restricted browser page (e.g., chrome:// or about: pages) where audio control is not available.</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Badge Style Options</h4>
          <p>Customize the volume badge appearance in Settings → Appearance → Badge Style:</p>
          <ul class="feature-list">
            <li><strong>Light on Dark</strong> (default) — White text on black background</li>
            <li><strong>Dark on Light</strong> — Black text on white background</li>
            <li><strong>Volume Color</strong> — Background color matches volume level: blue (1-50%), green (51-100%), yellow (101-200%), orange (201-350%), purple (351-500%). Muted (0%) is always red.</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Volume Color Indicators</h4>
          <p>The volume percentage display and slider in the popup use color coding to indicate the current level:</p>
          <ul class="feature-list">
            <li><strong style="color: #ef4444;">Red</strong> — Muted (0%)</li>
            <li><strong style="color: #60a5fa;">Blue</strong> — Reduced (1-50%)</li>
            <li><strong style="color: #4ade80;">Green</strong> — Normal (51-100%)</li>
            <li><strong style="color: #facc15;">Yellow</strong> — Boosted (101-200%)</li>
            <li><strong style="color: #fb923c;">Orange</strong> — High (201-350%)</li>
            <li><strong style="color: #a855f7;">Purple</strong> — Ultra (351-500%)</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Header Layout Customization</h4>
          <p>Customize the popup header in Settings → Header Layout:</p>
          <ul class="feature-list">
            <li><strong>Drag to reorder</strong> — Rearrange icons by dragging them to new positions</li>
            <li><strong>Hide optional icons</strong> — Focus, Theme, and Volume Icon can be hidden</li>
            <li><strong>Spacers</strong> — Add up to 4 spacers to create visual groupings between icons</li>
            <li><strong>Locked items</strong> — ABTC Logo, first spacer, and Brand Text are locked at the start and cannot be moved or hidden</li>
          </ul>
          <p style="margin-top: 8px;"><em>Required icons (Audio Mode, Basic/Advanced, Settings) cannot be hidden but can be reordered.</em></p>
        </div>

        <div class="info-box">
          <h4>Popup Sections Customization</h4>
          <p>Customize which sections appear in the popup in Settings → Advanced Controls:</p>
          <ul class="feature-list">
            <li><strong>Balance</strong> — Balance slider/presets and Stereo/Mono/Swap controls</li>
            <li><strong>Speed</strong> — Playback speed presets/slider (0.05x to 5x)</li>
            <li><strong>Bass</strong> — Bass boost/cut (-24 to +24 dB)</li>
            <li><strong>Treble</strong> — Treble boost/cut (-24 to +24 dB)</li>
            <li><strong>Voice</strong> — Voice clarity boost (0 to +18 dB)</li>
            <li><strong>Range</strong> — Dynamic range compression (Off/Podcast/Movie/Max)</li>
            <li><strong>Output</strong> — Audio output device selector</li>
            <li><strong>Site Rule</strong> — Add site-specific volume rules</li>
          </ul>
          <p style="margin-top: 8px;"><em>Drag to reorder sections. At least one section must remain visible.</em></p>
        </div>

        <div class="info-box">
          <h4>Sliders vs Presets (S/P Toggle)</h4>
          <p>Six controls support dual presentation modes — preset buttons or continuous sliders:</p>
          <ul class="feature-list">
            <li><strong>Speed, Bass, Treble, Voice, Range, Balance</strong> — Each has an independent S/P toggle</li>
            <li><strong>S (Sliders)</strong> — Continuous slider with value display and reset button</li>
            <li><strong>P (Presets)</strong> — Quick-select buttons (e.g., Off/Low/Medium/High)</li>
            <li><strong>All Sliders / All Presets</strong> — Bulk-set all items at once</li>
          </ul>
          <p style="margin-top: 8px;"><em>Toggle per-item in Settings → Advanced Controls using the S/P button next to each item. Your preference syncs across devices.</em></p>
        </div>
      </div>
    </div>

    <!-- Context Menu -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Context Menu</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">Right-click on any webpage to access quick audio controls without opening the popup.</p>

        <div class="info-box">
          <h4>Available Menu Items</h4>
          <p>The context menu provides access to all major audio features:</p>
          <ul class="feature-list">
            <li><strong>Volume</strong> — Mute plus your five custom volume presets</li>
            <li><strong>Balance</strong> — Full Left, Left 50%, Center, Right 50%, Full Right</li>
            <li><strong>Channel Mode</strong> — Stereo, Mono, Swap L/R</li>
            <li><strong>Bass Boost</strong> — Off, plus your custom Low/Medium/High values</li>
            <li><strong>Bass Cut</strong> — Off, plus your custom Low/Medium/High values</li>
            <li><strong>Treble Boost</strong> — Off, plus your custom Low/Medium/High values</li>
            <li><strong>Treble Cut</strong> — Off, plus your custom Low/Medium/High values</li>
            <li><strong>Voice Boost</strong> — Off, plus your custom Low/Medium/High values</li>
            <li><strong>Speed</strong> — Normal (1x), Slow (Low/Medium/High), Fast (Low/Medium/High)</li>
            <li><strong>Range</strong> — Off, Podcast, Movie, Maximum (dynamic range compression)</li>
            <li><strong>Pause/Play</strong> — Toggle media playback on the current tab</li>
            <li><strong>Toggle Focus Mode</strong> — Mute/unmute all other browser tabs</li>
            <li><strong>Reset Tab to Defaults</strong> — Reset volume, EQ, speed, and all effects to defaults</li>
            <li><strong>Disable Audio Processing</strong> — Disable audio processing, use native browser audio</li>
            <li><strong>Enable Tab Capture Mode</strong> — Use Tab Capture for this domain (Chrome only)</li>
            <li><strong>Enable Web Audio Mode</strong> — Use Web Audio for this domain</li>
            <li><strong>← Previous Audio Tab</strong> — Switch to the previous tab with audio</li>
            <li><strong>→ Next Audio Tab</strong> — Switch to the next tab with audio</li>
            <li><strong>Open Settings</strong> — Open the settings page</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Audio Modes -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Audio Modes</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">The extension offers three audio processing modes. Switch between them using the header buttons or context menu.</p>

        <div class="info-box">
          <h4>Tab Capture (Chrome only)</h4>
          <p>Captures audio at the browser level. <em>Default and recommended for Chrome.</em></p>
          <ul class="feature-list">
            <li>Volume range: 0-500% (with boost)</li>
            <li>All effects: EQ, compressor, balance, device switching, visualizer</li>
            <li>Works on all sites regardless of how they create audio</li>
          </ul>
          <p style="margin-top: 8px;"><strong>Note:</strong> Chrome requires a "user gesture" before Tab Capture can access a tab's audio. Look for a <strong>!</strong> badge on the extension icon — this indicates Tab Capture needs activation. Simply opening the popup or using a keyboard shortcut (like volume up/down) while the tab is active is enough. Tab Capture activates automatically and stays active until you close the tab.</p>
        </div>

        <div class="info-box">
          <h4>Web Audio</h4>
          <p>Hooks into page audio directly via the Web Audio API. <em>Default for Firefox.</em></p>
          <ul class="feature-list">
            <li>Volume range: 0-500% (with boost)</li>
            <li>All effects: EQ, compressor, balance, device switching, visualizer</li>
            <li>May not work on sites with CORS restrictions or custom audio implementations</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Disabled Mode</h4>
          <p>Disables audio processing and uses the browser's native volume control.</p>
          <ul class="feature-list">
            <li>Volume range: 0-100% only (no boost)</li>
            <li>No effects available</li>
            <li>Maximum compatibility — works on all sites</li>
          </ul>
          <p style="margin-top: 8px;"><strong>Disable audio processing when:</strong> Audio doesn't play, you hear glitches/distortion, or audio and video become out of sync.</p>
        </div>

        <div class="info-box">
          <h4>Switching Modes</h4>
          <ul class="feature-list">
            <li><strong>Tab Capture button</strong> — Click in header to enable Tab Capture mode (Chrome only, blue when active)</li>
            <li><strong>Web Audio button</strong> — Click in header to enable Web Audio mode (orange when active)</li>
            <li><strong>Disable button (⊘)</strong> — Click in header to disable audio processing (red when active)</li>
            <li><strong>Context menu</strong> — Right-click and select the audio mode option</li>
          </ul>
          <p style="margin-top: 8px;">Your preference is saved per-site. The page refreshes when switching modes.</p>
        </div>

        <div class="info-box">
          <h4>Fullscreen Support (Tab Capture)</h4>
          <p>Chrome's Tab Capture API prevents video elements from entering true fullscreen on their own. The extension works around this by automatically switching the browser window to fullscreen (equivalent to pressing F11) when a video requests fullscreen.</p>
          <ul class="feature-list">
            <li><strong>How it works</strong> — When you click a video's fullscreen button, the extension detects the request and toggles browser fullscreen instead. The video fills your entire screen as expected.</li>
            <li><strong>Exiting fullscreen</strong> — Press Escape or the video's exit fullscreen button. The browser window returns to its previous state (maximized or normal).</li>
            <li><strong>Troubleshooting</strong> — If fullscreen gets stuck or doesn't exit cleanly, press <strong>F11</strong> to manually toggle browser fullscreen.</li>
          </ul>
          <p style="margin-top: 8px;"><em>This workaround only applies to Tab Capture mode on Chrome. Web Audio mode and Firefox handle fullscreen natively without any workaround.</em></p>
        </div>
      </div>
    </div>

    <!-- Now Playing & Visualizer -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Now Playing & Visualizer</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">The Now Playing area at the top of the popup shows the current audio tab with playback controls and a visualizer.</p>

        <div class="info-box">
          <h4>Tab Navigation</h4>
          <p>When multiple tabs have audio, use the navigation controls to switch between them:</p>
          <ul class="feature-list">
            <li><strong>◀ Previous</strong> — Switch to the previous audio tab</li>
            <li><strong>▶ Next</strong> — Switch to the next audio tab</li>
          </ul>
          <p style="margin-top: 8px;">The arrows and tab counter only appear when there are multiple tabs with audio. The counter (e.g., "2 of 5") shows your position in the list.</p>
        </div>

        <div class="info-box">
          <h4>Playback Controls</h4>
          <ul class="feature-list">
            <li><strong>Play/Pause Button</strong> — Toggle media playback on the current tab</li>
            <li><strong>Click Visualizer</strong> — Open the audio tab in your browser</li>
            <li><strong>Click and Hold Visualizer</strong> — Cycle through visualizer styles</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Visualizer Styles</h4>
          <p>Five visualization styles are available (plus Off):</p>
          <ul class="feature-list">
            <li><strong>Bars</strong> — Classic frequency bars</li>
            <li><strong>Waveform</strong> — Audio waveform display</li>
            <li><strong>Mirrored</strong> — Symmetrical frequency bars</li>
            <li><strong>Curve</strong> — Smooth frequency curve</li>
            <li><strong>Dots</strong> — Bouncing frequency dots</li>
            <li><strong>Off</strong> — Disable visualization</li>
          </ul>
          <p style="margin-top: 8px;">Set your default style in the Visualizer settings section, or cycle through styles by clicking and holding the visualizer. You can also set a custom visualizer color in Settings → Appearance → Visualizer using the color picker.</p>
        </div>

        <div class="info-box">
          <h4>Tab Title Location</h4>
          <p>Choose where to display the current tab's title:</p>
          <ul class="feature-list">
            <li><strong>Inside</strong> — Shows title and URL overlaid on the visualizer (default)</li>
            <li><strong>Below</strong> — Shows just the title in a separate row below the visualizer</li>
            <li><strong>Above</strong> — Shows the title above the visualizer</li>
            <li><strong>Hidden</strong> — Hides the tab title entirely</li>
          </ul>
          <p style="margin-top: 8px;">Configure this in Settings → Appearance → Tab Title Location. When the visualizer is hidden, "Inside" and "Below" are automatically disabled.</p>
        </div>

        <div class="info-box">
          <h4>Visualizer Auto-Disable</h4>
          <p>Some sites create audio in ways that aren't accessible to the visualizer (Web Audio API, cross-origin restrictions, etc.). The visualizer automatically detects this:</p>
          <ul class="feature-list">
            <li>After ~2-3 seconds of no audio data, the visualizer auto-disables</li>
            <li>A "Visualizer ⊘" indicator appears in the Now Playing area</li>
            <li>A status message appears at the bottom of the popup</li>
            <li>All audio controls still work normally</li>
          </ul>
          <p style="margin-top: 8px;"><strong>To fix:</strong> Try switching to a different audio mode using the header buttons. On Chrome, Tab Capture usually resolves visualizer issues. If no mode works, the site may have audio restrictions that prevent visualization.</p>
        </div>

        <div class="info-box">
          <h4>Switching Audio Modes (Chrome)</h4>
          <p>If audio isn't working properly, try switching to a different audio mode:</p>
          <ul class="feature-list">
            <li>Use the Tab Capture, Web Audio, or Disable buttons in the popup header</li>
            <li>Tab Capture (default) captures audio at the browser level — most reliable</li>
            <li>Web Audio hooks into page audio directly — alternative if Tab Capture has issues</li>
            <li>Disabled uses native browser audio — maximum compatibility, no effects</li>
            <li>Your preference is saved per-site for future visits</li>
            <li>Saved sites can be viewed in Settings → Audio Modes → Site Overrides</li>
          </ul>
          <p style="margin-top: 8px;"><strong>Note:</strong> Firefox does not support Tab Capture. Web Audio is the default on Firefox.</p>
        </div>

        <div class="info-box">
          <h4>Disabling Audio Processing (Firefox)</h4>
          <p>On Firefox, if the extension cannot access audio on a site, you can disable audio processing:</p>
          <ul class="feature-list">
            <li>Click the Disable button (⊘) in the popup header</li>
            <li>This uses the browser's native audio handling</li>
            <li>Volume control is limited to 0-100% (no boost capability)</li>
            <li>EQ effects (bass, treble, voice boost) are not available</li>
            <li>Your preference is saved per-site for future visits</li>
          </ul>
          <p style="margin-top: 8px;"><strong>Note:</strong> Web Audio is the default mode on Firefox. Firefox does not support Tab Capture, so disabling audio processing is the fallback when Web Audio cannot access audio.</p>
        </div>

        <div class="info-box">
          <h4>Visualizer Troubleshooting</h4>
          <p>If the visualizer appears to strobe or flicker erratically:</p>
          <ul class="feature-list">
            <li>Close and reopen the popup — this usually resolves the issue immediately</li>
            <li>This can occasionally happen when switching audio modes or reconnecting to Tab Capture</li>
            <li>The audio controls continue to work normally even if the visualizer glitches</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Playback Seekbar -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Playback Seekbar</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">When media with a known duration is playing (audio or video), a seekbar appears below the visualizer.</p>

        <div class="info-box">
          <h4>Seekbar Controls</h4>
          <ul class="feature-list">
            <li><strong>Drag the slider</strong> — Seek to any position in the media</li>
            <li><strong>Arrow keys</strong> — Fine-grained seeking when the slider is focused</li>
            <li><strong>Left time</strong> — Shows current playback position (or total duration when time remaining is selected)</li>
            <li><strong>Right time</strong> — Shows total duration (or time remaining as -M:SS when toggled)</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Time Display Toggle</h4>
          <p>Click the right-side time display to toggle between two modes:</p>
          <ul class="feature-list">
            <li><strong>Current time mode</strong> (default) — Left shows elapsed time, right shows total duration</li>
            <li><strong>Time remaining mode</strong> — Left shows total duration, right shows countdown (e.g., -1:20)</li>
          </ul>
          <p style="margin-top: 8px;">Your preference is saved and persists across sessions. You can also toggle this in Settings → Appearance → Playback Seekbar.</p>
        </div>

        <div class="info-box">
          <h4>Visibility</h4>
          <p>The seekbar automatically appears when media with a duration is detected and hides otherwise. You can hide the seekbar entirely in Settings → Appearance → Playback Seekbar.</p>
        </div>
      </div>
    </div>

    <!-- Volume Boost -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Volume Boost</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">Volume boost allows you to amplify audio beyond the normal 100% level, up to 500%.</p>

        <div class="info-box">
          <h4>Audio Processing Chain</h4>
          <p>Your audio passes through several stages to ensure quality and safety:</p>
          <ol class="chain-list">
            <li><strong>Source</strong> — Original audio from the webpage</li>
            <li><strong>Bass/Treble/Voice Filters</strong> — EQ adjustments for frequency shaping</li>
            <li><strong>Stereo Panner</strong> — Left/right balance control</li>
            <li><strong>Channel Matrix</strong> — Mono mixing and channel swap</li>
            <li><strong>Compressor</strong> — Dynamic range compression (if enabled)</li>
            <li><strong>Gain Node</strong> — Volume amplification (0-500%)</li>
            <li><strong>Limiter</strong> — Prevents clipping and protects your speakers</li>
            <li><strong>Output</strong> — Final audio to your speakers/headphones</li>
          </ol>
        </div>

        <div class="info-box">
          <h4>The Limiter</h4>
          <p>When volume exceeds 100%, audio peaks can clip and cause distortion. The built-in limiter acts as a safety net:</p>
          <ul class="feature-list">
            <li>Automatically catches audio peaks that would exceed safe levels</li>
            <li>Prevents harsh distortion and speaker damage</li>
            <li>Allows you to boost quiet content without worrying about sudden loud sounds</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Non-Linear Slider Design</h4>
          <p>The volume slider uses a non-linear scale for optimal control:</p>
          <ul class="feature-list">
            <li><strong>Left half (0-50%)</strong> — Maps to 0-100% volume with fine control</li>
            <li><strong>Center position</strong> — Always 100% (normal volume)</li>
            <li><strong>Right half (50-100%)</strong> — Maps to 100-500% boost range</li>
          </ul>
          <p style="margin-top: 8px;"><strong>Why?</strong> Most volume adjustments happen in the normal range. The left half gives you precise control for everyday use, while the right half provides the full boost range when you need it.</p>
        </div>
      </div>
    </div>

    <!-- Balance & Channel Mode -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Balance & Channel Mode</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">Control how audio is distributed between your left and right speakers or headphone channels.</p>

        <div class="info-box">
          <h4>Channel Mode Buttons</h4>
          <ul class="feature-list">
            <li><strong>S (Stereo)</strong> — Default mode with separate left and right channels</li>
            <li><strong>M (Mono)</strong> — Merges both channels into a single mono signal (useful for one earbud)</li>
            <li><strong>⇄ (Swap)</strong> — Swaps left and right audio channels</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Balance Controls</h4>
          <p>Adjusts the left/right audio balance. Two modes are available:</p>
          <ul class="feature-list">
            <li><strong>Slider mode (S)</strong> — Continuous slider from full left (-100) to full right (+100). Scroll wheel supported.</li>
            <li><strong>Presets mode (P)</strong> — Three buttons: Left, Center, Right. Quick one-click panning.</li>
          </ul>
          <p style="margin-top: 8px;">Useful for compensating for hearing differences, off-center speakers, or isolating channels. S/M/Swap and reset buttons are available in both modes.</p>
        </div>

        <div class="info-box">
          <h4>Balance Presets Customization</h4>
          <p>In Settings → Presets → Balance Presets, you can customize how far the Left and Right buttons pan:</p>
          <ul class="feature-list">
            <li><strong>Left (1-100)</strong> — How far left the "Left" button pans (default: 100)</li>
            <li><strong>Right (1-100)</strong> — How far right the "Right" button pans (default: 100)</li>
            <li><strong>Center</strong> — Always resets balance to 0 (not customizable)</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- EQ Effects -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>EQ Effects (Bass, Treble, Voice)</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">Shape your audio by boosting or cutting specific frequency ranges.</p>

        <div class="info-box">
          <h4>Bass Boost/Cut</h4>
          <p>Adjusts low frequencies (centered at 200Hz):</p>
          <ul class="feature-list">
            <li><strong>Boost</strong> — Music that sounds thin or lacks low-end punch</li>
            <li><strong>Cut</strong> — Excessive rumble or boomy audio</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Treble Boost/Cut</h4>
          <p>Adjusts high frequencies (centered at 6kHz):</p>
          <ul class="feature-list">
            <li><strong>Boost</strong> — Audio sounds muffled or lacks clarity</li>
            <li><strong>Cut</strong> — Harsh, sibilant recordings that hurt your ears</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Voice Boost</h4>
          <p>Enhances mid-range frequencies where human speech is most prominent. Use for:</p>
          <ul class="feature-list">
            <li>Movies with quiet dialogue and loud sound effects</li>
            <li>Podcasts or interviews with soft-spoken guests</li>
            <li>Video calls where participants are hard to hear</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Slider vs Preset Mode</h4>
          <p>Bass, Treble, and Voice each support two control modes:</p>
          <ul class="feature-list">
            <li><strong>Presets (P)</strong> — 7 buttons for bass/treble (-24, -12, -6, Off, +6, +12, +24 dB) or 4 buttons for voice (Off, +4, +10, +18 dB)</li>
            <li><strong>Slider (S)</strong> — Continuous adjustment with dB value display and reset button. Scroll wheel supported.</li>
          </ul>
          <p style="margin-top: 8px;"><em>Preset button values are customizable in Settings → Presets.</em></p>
        </div>
      </div>
    </div>

    <!-- Speed Control -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Speed Control</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">Adjust playback speed from 0.05x (very slow) to 5x (very fast). Useful for lectures, podcasts, and language learning.</p>

        <div class="info-box">
          <h4>Slider vs Preset Mode</h4>
          <p>Speed supports two control modes:</p>
          <ul class="feature-list">
            <li><strong>Presets (P)</strong> — 7 buttons: 3 slow speeds, 1x (off), 3 fast speeds. Default slow: 0.75x, 0.50x, 0.25x. Default fast: 1.25x, 1.50x, 2.00x.</li>
            <li><strong>Slider (S)</strong> — Continuous slider with non-linear scale. Center is 1x. Fine control near normal speed, wider range at extremes.</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Customizing Speed Presets</h4>
          <p>In Settings → Presets → Speed Presets:</p>
          <ul class="feature-list">
            <li><strong>Slow 1-3</strong> — Left-side buttons (0.05 to 0.99x)</li>
            <li><strong>Fast 1-3</strong> — Right-side buttons (1.01 to 5.00x)</li>
          </ul>
          <p style="margin-top: 8px;"><em>The center "1x" button always resets to normal speed.</em></p>
        </div>
      </div>
    </div>

    <!-- Range (Compressor) -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Range (Compressor)</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">The audio compressor reduces the difference between loud and quiet sounds, making audio more consistent.</p>

        <div class="compressor-info">
          <div class="compressor-preset">
            <span class="preset-name low">Podcast</span>
            <span class="preset-desc">Light compression for spoken word content. Evens out volume differences between speakers without affecting audio quality.</span>
          </div>
          <div class="compressor-preset">
            <span class="preset-name medium">Movie</span>
            <span class="preset-desc">Medium compression for films and TV shows. Reduces the gap between quiet dialogue and loud action scenes.</span>
          </div>
          <div class="compressor-preset">
            <span class="preset-name high">Maximum</span>
            <span class="preset-desc">Heavy compression for late-night listening. Significantly reduces dynamic range so you don't need to adjust volume constantly.</span>
          </div>
        </div>

        <p class="section-note"><strong>Note:</strong> Bass, Treble, and Voice Boost are automatically disabled when the compressor is active to prevent audio artifacts.</p>

        <div class="info-box">
          <h4>Slider vs Preset Mode</h4>
          <p>Range supports two control modes:</p>
          <ul class="feature-list">
            <li><strong>Presets (P)</strong> — Four buttons: Off, Podcast, Movie, Max (default)</li>
            <li><strong>Slider (S)</strong> — 4-position snap slider with color-coded gradient. Snaps to Off/Podcast/Movie/Max positions.</li>
          </ul>
          <p style="margin-top: 8px;"><em>Unlike other sliders, the Range slider is not continuous — it snaps between the 4 preset positions. Scroll wheel steps between positions.</em></p>
        </div>

        <div class="info-box">
          <h4>Automatic Loudness Compensation</h4>
          <p>Compression increases perceived loudness. To maintain consistent volume, the extension automatically reduces gain:</p>
          <ul class="feature-list">
            <li><strong>Podcast</strong> — 0.80x gain (-1.9dB reduction)</li>
            <li><strong>Movie</strong> — 0.65x gain (-3.7dB reduction)</li>
            <li><strong>Maximum</strong> — 0.50x gain (-6dB reduction)</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Device Switching -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Device Switching</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">Route specific tabs to different audio outputs by selecting a device from the dropdown in the popup.</p>

        <div class="info-box">
          <h4>Use Cases</h4>
          <ul class="feature-list">
            <li><strong>Gaming + Music</strong> — Game audio to speakers, background music to headphones</li>
            <li><strong>Streaming + Chat</strong> — Stream audio to capture device, Discord to headphones</li>
            <li><strong>Work Calls</strong> — Video calls to headset, other tabs to speakers</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Device Switching Not Working?</h4>
          <p>If devices appear but switching doesn't work, the website itself may need microphone permission:</p>
          <ul class="feature-list">
            <li>Click the lock/site info icon in your browser's address bar</li>
            <li>Find Microphone in the permissions list</li>
            <li>Change it from "Block" to "Allow"</li>
            <li>Refresh the page</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Site Rules -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Site Rules</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">Automatically apply your preferred settings whenever you visit specific websites.</p>

        <div class="info-box">
          <h4>What Site Rules Save</h4>
          <p>When you create a site rule, it captures ALL your current settings:</p>
          <ul class="feature-list">
            <li>Volume level, balance, and channel mode</li>
            <li>Playback speed</li>
            <li>Audio effects (compressor, voice, bass, treble)</li>
            <li>Output device selection</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>URL vs Domain Rules</h4>
          <ul class="feature-list">
            <li><strong>URL rule</strong> — Applies only to the exact page URL</li>
            <li><strong>Domain rule</strong> — Applies to all pages on that website (check "Entire domain")</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Storage & Cleanup</h4>
          <p>Site rules are stored in sync storage (~100KB limit). The extension tracks last-used dates:</p>
          <ul class="feature-list">
            <li>Storage meter shows usage in Settings</li>
            <li>"Clean up old rules" removes rules unused for 90+ days</li>
            <li>Warning at 80% full, blocked at 90%</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Browser Sync -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Browser Sync</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">Your settings automatically sync across devices when signed into your browser account.</p>

        <div class="info-box">
          <h4>What Syncs</h4>
          <ul class="feature-list">
            <li>All preset values (volume, bass, treble, voice, speed, balance, volume steps)</li>
            <li>Site rules</li>
            <li>Audio mode overrides (Tab Capture, Web Audio, and Disabled mode sites)</li>
            <li>Default audio mode setting</li>
            <li>Theme, visualizer style and color, badge style, tab title location</li>
            <li>Seekbar visibility and time display preference</li>
            <li>EQ mode (sliders/presets), Basic/Advanced mode</li>
            <li>Header layout customization</li>
            <li>Popup sections layout (order, hidden, slider/preset per section)</li>
            <li>Keyboard shortcuts footer visibility</li>
            <li>UI state (expanded/collapsed sections)</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>What Stays Local</h4>
          <ul class="feature-list">
            <li>Default audio device and "use last device" preference (different hardware per device)</li>
            <li>Current tab volumes and effects (session-specific)</li>
            <li>Visualizer style and color (cached locally for fast startup, also synced)</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Browser Compatibility</h4>
          <p>Sync works with Chrome, Firefox, Brave, Vivaldi, and Edge when signed into their respective accounts.</p>
          <p style="margin-top: 8px;"><strong>Important:</strong> Cross-browser sync is not possible — Chrome syncs to Chrome, Firefox to Firefox, etc.</p>
        </div>
      </div>
    </div>

    <!-- Data Management -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Data Management</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">Backup, restore, and reset your extension settings from the Data Management section in Settings.</p>

        <div class="info-box">
          <h4>Backup All Data</h4>
          <p>Downloads a CSV file containing all your settings:</p>
          <ul class="feature-list">
            <li>All presets (volume, bass, treble, voice, speed, balance, volume steps)</li>
            <li>Site rules and audio mode overrides</li>
            <li>Appearance settings (theme, visualizer, badge style, seekbar, header layout, popup sections)</li>
            <li>Default audio mode and popup mode</li>
            <li>Default output device selection</li>
          </ul>
          <p style="margin-top: 8px;"><em>Useful for transferring settings between browsers (since cross-browser sync is not possible) or as a safety net before making changes.</em></p>
        </div>

        <div class="info-box">
          <h4>Restore from Backup</h4>
          <p>Import a previously saved CSV backup file. All settings in the file will be applied, overwriting current values. The page reloads automatically after a successful restore.</p>
        </div>

        <div class="info-box">
          <h4>Reset All Settings</h4>
          <p>Resets everything to factory defaults. This cannot be undone. All presets, site rules, appearance settings, audio mode overrides, and layout customizations are removed.</p>
          <p style="margin-top: 8px;"><strong>Note:</strong> Keyboard shortcuts and microphone permissions are managed by the browser and cannot be reset by the extension.</p>
        </div>
      </div>
    </div>

    <!-- Privacy & Security -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Privacy & Security</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">This extension is designed with security and privacy in mind.</p>

        <div class="info-box">
          <h4>Data Privacy</h4>
          <ul class="feature-list">
            <li><strong>No data collection</strong> — Settings stay in your browser only</li>
            <li><strong>No analytics</strong> — No tracking or telemetry</li>
            <li><strong>Local processing</strong> — All audio processing happens in your browser</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>About Permissions</h4>
          <ul class="feature-list">
            <li><strong>All URLs</strong> — Required to control audio on any website</li>
            <li><strong>Tabs</strong> — Track which tab you're controlling</li>
            <li><strong>Storage</strong> — Save your preferences and sync across devices</li>
            <li><strong>Tab Capture</strong> — Capture tab audio for processing (Chrome only)</li>
            <li><strong>Active Tab</strong> — Access the currently active tab when you click the extension</li>
            <li><strong>Scripting</strong> — Inject audio processing scripts into pages</li>
            <li><strong>Offscreen</strong> — Process Tab Capture audio in background (Chrome only)</li>
            <li><strong>Context Menus</strong> — Provide right-click menu options</li>
            <li><strong>Microphone (browser prompt)</strong> — Not a manifest permission. The browser may prompt for microphone access when listing audio output devices. This is only used to enumerate devices — the extension never records audio.</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Accessibility -->
    <div class="faq-subsection">
      <h3 class="faq-subsection-header" role="button" aria-expanded="false" tabindex="0">
        <span>Accessibility</span>
        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </h3>
      <div class="faq-subsection-content">
        <p class="section-desc">This extension works well with assistive technologies.</p>

        <div class="info-box">
          <h4>Screen Reader Support</h4>
          <ul class="feature-list">
            <li>All buttons have descriptive ARIA labels</li>
            <li>Sliders announce current values</li>
            <li>Status changes announced via live regions</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>Keyboard Navigation</h4>
          <ul class="feature-list">
            <li><strong>Tab</strong> — Move between controls</li>
            <li><strong>Enter/Space</strong> — Activate buttons</li>
            <li><strong>Arrow keys</strong> — Adjust sliders</li>
            <li><strong>Alt+Shift+Up</strong> — Increase volume (global, works from any tab)</li>
            <li><strong>Alt+Shift+Down</strong> — Decrease volume (global, works from any tab)</li>
            <li><strong>Alt+Shift+M</strong> — Toggle mute (global, works from any tab)</li>
          </ul>
          <p style="margin-top: 8px;"><em>Global keyboard shortcuts can be customized in your browser's extension shortcut settings (Chrome: chrome://extensions/shortcuts, Firefox: about:addons → gear icon → Manage Extension Shortcuts).</em></p>
        </div>
      </div>
    </div>

  </div>

  <!-- Shared utilities - must load first -->
  <script src="../shared/browser-api.js"></script>
  <script src="faq.js"></script>
</body>
</html>
